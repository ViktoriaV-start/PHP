<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BranD Shop</title>
    <script src="https://use.fontawesome.com/95b86417ef.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style/norm.css">
    <link rel="stylesheet" href="/style/style.css?ver=<?php echo time();?>">
</head>

<body>

<header class="header-wrapper">
    <div class="header container">

        <a class="logo header__logo" href="/product">
            <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="59px" height="51px">
                <image  x="0px" y="0px" width="59px" height="51px"  xlink:href="data:img/png;base64,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" />
            </svg>

            <span class="logo__letters">
                    BRAN<span class="logo__special-letter">D</span>
                </span>
        </a>
        <!------>
        <div class="header__browse-search">
            <div class="browse" action="#">
                <button class="browse__btn">
                    <span class="browse__text">Browse</span>
                    <i class="browse__arrow fas fa-sort-down"></i>
                </button>
            </div>
            <form class="search-form" action="#">
                <input class="search-form__input" type="text" placeholder="Search for item...">
                <button type="submit" class="search-form__submit">
                    <i class="fas fa-search fa-lg"></i>
                </button>
            </form>
        </div>
        <!------>
        <a href="/auth/account" class="header__hrefUser"><div class="header__user">{{ user.name }}</div></a>
        <div class="header__buttons">
            <a href="/cart">
                <div class="header__cart">
                    <div class="header__cart-quantity">{{ count }}</div>
                    <svg width="32" height="29" viewBox="0 0 32 29">
                        <path d="M31.899,7.565 L26.493,19.977 C26.296,20.410 25.882,20.686 25.409,20.686 L10.554,20.686 C10.021,20.686 9.548,20.331 9.410,19.819 L4.577,2.364 L1.184,2.364 C0.533,2.364 -0.000,1.832 -0.000,1.182 C-0.000,0.532 0.533,-0.001 1.184,-0.001 L5.464,-0.001 C5.997,-0.001 6.471,0.354 6.609,0.866 L11.442,18.322 L24.620,18.322 L28.999,8.274 L14.401,8.274 C13.750,8.274 13.217,7.742 13.217,7.092 C13.217,6.442 13.750,5.910 14.401,5.910 L30.814,5.910 C31.208,5.910 31.583,6.107 31.800,6.442 C32.017,6.777 32.057,7.190 31.899,7.565 ZM9.429,23.641 C10.909,23.641 12.112,24.843 12.112,26.320 C12.112,27.798 10.909,28.999 9.429,28.999 C7.950,28.999 6.747,27.798 6.747,26.320 C6.747,24.843 7.950,23.641 9.429,23.641 ZM26.020,23.641 C27.500,23.542 28.782,24.665 28.881,26.123 C28.920,26.852 28.703,27.542 28.230,28.073 C27.756,28.625 27.105,28.940 26.395,28.999 C26.336,28.999 26.257,28.999 26.198,28.999 C24.797,28.999 23.633,27.896 23.535,26.498 C23.436,25.040 24.541,23.739 26.020,23.641 Z" /> </svg>
                </div>
            </a>
            <a href="/auth/account"><button class="header__btn-account">My Account</button></a>
        </div>
    </div>
</header>

{% include('nav.twig') %}


<main class="container">
    <section class='shop-cart'>

        <div class="shop-cart__line">
            <h3 class="shop-cart__heading">PRODUCT DETAILS</h3>
            <span class="shop-cart__heading shop-cart__heading-name">UNIT PRICE</span>
            <span class="shop-cart__heading shop-cart__heading-name">QUANTITY</span>
            <span class="shop-cart__heading shop-cart__heading-name">SHIPPING</span>
            <span class="shop-cart__heading shop-cart__heading-name">SUBTOTAL</span>
            <span class="shop-cart__heading shop-cart__heading-name">ACTION</span>
        </div>


        {% for item in goods %}

            <div class = 'shop-cart__line' data-id="{{ item.id }}">
                <div class='shop-cart__details'>
                    <img class='shop-cart__photo' src='/images/img_small/card{{ item.product_id }}.jpg' alt='Added Product'>
                    <div class='shop-cart__details-wrapper shop-cart__title'>{{ item.name }}</div>

                </div>

                <span class='shop-cart__data'>${{ item.price }}</span>

                <div class='shop-cart__data-input'>
                    <div class='shop-cart__quantity-wrap'>


                        <span  class='shop-cart__quantity' data-id="{{ item.id }}">{{ item.quantity }}</span>


                    </div>

                </div>

                <span class='shop-cart__data'>FREE</span>
                <span class='shop-cart__data shop-cart__price subtotal' data-id="{{ item.id }}">${{ item.subtotal }}</span>

                <div class='shop-cart__delete-wrapper' data-id="{{ item.id }}">

                    <button class='btn-delete'>
                        <svg class='shop-cart__delete' fill='currentColor' height='15' width='15' viewBox='0 0 512 512'><path class='shop-cart__dlt'  d='M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z'></path></svg>
                    </button>

                </div>
            </div>

        {%  endfor %}


        <div class="shop-cart__buttons">
            <a href="/cart/clear"><button class="shop-cart__btn-clear">Clear Shopping Cart</button></a>

            <a href="/product"><button class="shop-cart__btn-continue">Continue shopping</button></a>
        </div>

    </section>

    <section class="ordering">

        <form class="ordering__delivery">
            <h3 class="ordering__address">SHIPPING ADDRESS</h3>
            <input class="ordering__details" type="text" placeholder="Bangladesh">
            <input class="ordering__details" type="text" placeholder="State">
            <input class="ordering__details" type="text" placeholder="Postcode/ Zip">
            <button class="ordering__quote" type="submit">GET A QUOTE</button>
        </form>

        <form class="ordering__discount">
            <h3 class="ordering__coupon">COUPON DISCOUNT</h3>

            <span class="ordering__discount-text">Enter your coupon code if you have one</span>
            <input class="ordering__discount-code" type="text" placeholder="Coupon code">
            <button class="ordering__apply" type="submit">APPLY COUPON</button>
        </form>

        <div class="ordering__total">
            <div class="ordering__subtotal-wrapper">
                <span class="ordering__subtotal">SUB TOTAL</span>
                <span class="ordering__subtotal sum">${{ sum }}</span>
            </div>
            <div class="ordering__grandtotal-wrapper">
                <h3 class="ordering__grandtotal">GRAND TOTAL</h3>
                <span class="ordering__sum total">${{ sum }}</span>
            </div>

        </div>
    </section>

    <section class="make-order">
        <h2 class="make-order__h2">ORDERING INFORMATION</h2>
        <div class="auth-info">
            <div class="auth-info__header">NAME:</div><span class="auth-info__info">{{ user.name }}</span>
            <div class="auth-info__header">SURNAME:</div><span class="auth-info__info">{{ user.surname }}</span>
            <div class="auth-info__header">EMAIL ADDRESS:</div><span class="auth-info__info">{{ user.email }}</span>
            <div class="auth-info__header">PHONE:</div><span class="auth-info__info">{{ user.phone }}</span>
            <div class="auth-info__header auth-info__header_pdd">SHIPPING ADDRESS:</div>
            <span class="auth-info__info">{{ user.address }}</span>
        </div>
{#        <form action="/cart/placement" method="post"><input type="text" name="userId" value="{{ user.id }}" hidden><button class="make-order__btn" type="submit" data-id="{{ user.id }}">MAKE ORDER</button></form>#}
        <button class="make-order__btn" type="submit" data-id="{{ user.id }}">MAKE ORDER</button>
    </section>

    <section class="order-number display-none">
        <span class="order-number__text">ORDER IS PLACED. ORDER NUMBER - </span><span class="order-number__text number">111</span>
    </section>


</main>

{% include('footer.twig') %}
<script>

    let orderingBtn = document.querySelector('.make-order__btn');
    orderingBtn.scrollIntoView({block: "center", behavior: "smooth"});
    let orderNumber = document.querySelector('.order-number');




    orderingBtn.addEventListener('click', () => {
        orderingBtn.classList.add('display-none');
        orderNumber.classList.remove('display-none');
        let id = orderingBtn.getAttribute('data-id');

        (
            async () => {
                const response = await fetch('http://localhost:8888/cart/placement', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json;charset=utf-8'
                    },
                    body: JSON.stringify({
                        id: id
                    })
                });
                let answer = await response.json();
                document.querySelector('.number').innerHTML = `${answer.orderNumber}`;
                console.log(answer);

            }
        )();

    });



</script>










</body>
</html>